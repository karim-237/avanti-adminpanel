datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum UserRole {
  USER
  ADMIN
}


model User {
  id             String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email          String   @unique @db.VarChar(255)
  name           String   @db.VarChar(255)
  role           String   @default("USER") @db.VarChar(10)
  password       String?
  image          String?
  email_verified Boolean  @default(false)
  created_at     DateTime @default(now()) @db.Timestamptz(6)
  updated_at     DateTime @default(now()) @db.Timestamptz(6)

  @@map("users")
}

model Setting {
  id                  Int       @id @default(autoincrement())
  site_name           String?   @db.VarChar(150)
  site_description    String?
  logo_path           String?   @db.VarChar(255)
  favicon_path        String?   @db.VarChar(255)
  maintenance_mode    Boolean?  @default(false)
  maintenance_message String?
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  updated_at          DateTime? @default(now()) @db.Timestamp(6)
  slogan              String?   @db.VarChar(255)
  url                 String?   @db.VarChar(255)

  @@map("site_settings")
}

model about_section {
  id                   Int       @id @default(autoincrement())
  left_image           String?
  right_image          String?
  main_image           String?
  secondary_image      String?
  video_url            String?
  experience_years     Int?
  experience_text      String?   @db.VarChar(100)
  satisfaction_percent Int?
  satisfaction_text    String?   @db.VarChar(100)
  products_sold        String?   @db.VarChar(20)
  products_text        String?   @db.VarChar(100)
  small_title          String?   @db.VarChar(100)
  main_title           String?   @db.VarChar(255)
  description          String?
  created_at           DateTime? @default(now()) @db.Timestamp(6)
  updated_at           DateTime? @default(now()) @db.Timestamp(6)
}

model authors {
  id         Int       @id @default(autoincrement())
  name       String    @db.VarChar(255)
  bio        String?
  photo_url  String?   @db.VarChar(255)
  position   String?   @db.VarChar(255)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  blogs      blogs[]
}

model blog_categories {
  id         Int       @id @default(autoincrement())
  name       String    @db.VarChar(100)
  slug       String    @unique @db.VarChar(100)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  updated_at DateTime? @default(now()) @db.Timestamp(6)
  blogs      blogs[]
}

model blog_tags {
  blog_id Int
  tag_id  Int
  blogs   blogs @relation(fields: [blog_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  tags    tags  @relation(fields: [tag_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([blog_id, tag_id])
}

model blog_views {
  id          Int   @id @default(autoincrement())
  blog_id     Int
  views_count Int?  @default(0)
  blogs       blogs @relation(fields: [blog_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model blogs {
  id                Int               @id @default(autoincrement())
  title             String            @db.VarChar(255)
  slug              String            @unique @db.VarChar(255)
  short_description String
  full_content      String?
  author            String?           @default("Admin") @db.VarChar(100)
  category          String?           @default("All") @db.VarChar(50)
  publish_date DateTime @default(now()) @db.Timestamp(6)
  status            String?           @default("published") @db.VarChar(20)
  meta_title        String?           @db.VarChar(255)
  meta_description  String?
  meta_keywords     String?           @db.VarChar(255)
  created_at        DateTime?         @default(now()) @db.Timestamp(6)
  updated_at        DateTime?         @default(now()) @db.Timestamp(6)
  featured          Boolean?          @default(false)
  content           String?
  image_url         String?
  published_at      DateTime?         @default(now()) @db.Timestamp(6)
  author_id         Int?
  quote             String?
  image_secondary   String?
  paragraph_1       String?
  paragraph_2       String?
  author_bio        String?
  category_id       Int?
  single_image      String?
  single_image_xl   String?
  blog_tags         blog_tags[]
  blog_views        blog_views[]
  authors           authors?          @relation(fields: [author_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  blog_categories   blog_categories?  @relation(fields: [category_id], references: [id], onUpdate: NoAction)
  blogs_post_tags   blogs_post_tags[]
  comments          comments[]
}

model blogs_post_tags {
  blog_id Int
  tag_id  Int
  blogs   blogs @relation(fields: [blog_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([blog_id, tag_id])
}

model choose_benefits {
  id          Int      @id @default(autoincrement())
  title       String?  @db.VarChar(255)
  description String?
  position    Int?
  active      Boolean? @default(true)
}

model choose_section {
  id          Int      @id @default(autoincrement())
  subtitle    String?  @db.VarChar(255)
  title       String?  @db.VarChar(255)
  description String?
  active      Boolean? @default(true)
}

model comments {
  id          Int       @id @default(autoincrement())
  blog_id     Int
  author_name String    @db.VarChar(255)
  email       String    @db.VarChar(255)
  message     String
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  blogs       blogs     @relation(fields: [blog_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model contact_messages {
  id         Int       @id @default(autoincrement())
  name       String?   @db.VarChar(100)
  phone      String?   @db.VarChar(50)
  email      String?   @db.VarChar(150)
  message    String?
  created_at DateTime? @default(now()) @db.Timestamp(6)
}

model discount_sections {
  id          Int       @id @default(autoincrement())
  image_path  String
  title       String?
  description String?
  button_text String?
  button_url  String?
  position    Int
  active      Boolean?  @default(true)
  created_at  DateTime? @default(now()) @db.Timestamp(6)
}

model home_banners {
  id          Int       @id @default(autoincrement())
  title       String?   @db.VarChar(255)
  subtitle    String?   @db.VarChar(255)
  description String?
  button_text String?   @db.VarChar(100)
  button_url  String?   @db.VarChar(255)
  image_path  String    @db.VarChar(255)
  position    Int?      @default(0)
  active      Boolean?  @default(true)
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  updated_at  DateTime? @default(now()) @db.Timestamp(6)
}

model newsletter_emails {
  id         Int       @id @default(autoincrement())
  email      String    @unique @db.VarChar(255)
  created_at DateTime? @default(now()) @db.Timestamp(6)
}

model newsletter_section {
  id         Int       @id @default(autoincrement())
  title      String    @default("Recevez nos dernières offres et nouveautés") @db.VarChar(255)
  subtitle   String    @default("Abonnez-vous") @db.VarChar(255)
  image_url  String    @default("") @db.VarChar(500)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  updated_at DateTime? @default(now()) @db.Timestamp(6)
}

model page_banners {
  id         Int       @id @default(autoincrement())
  page       String?   @db.VarChar(50)
  title      String?   @db.VarChar(255)
  subtitle   String?   @db.VarChar(255)
  image_path String?   @db.VarChar(255)
  active     Boolean?  @default(true)
  created_at DateTime? @default(now()) @db.Timestamp(6)
}

model product_categories {
  id         Int        @id @default(autoincrement())
  name       String     @db.VarChar(100)
  slug       String     @unique @db.VarChar(100)
  is_active  Boolean?   @default(true)
  created_at DateTime?  @default(now()) @db.Timestamp(6)
  products   products[]
}

model product_reviews {
  id         Int       @id @default(autoincrement())
  product_id Int
  name       String    @db.VarChar(255)
  email      String?   @db.VarChar(255)
  rating     Int?      @default(5)
  comment    String?
  created_at DateTime? @default(now()) @db.Timestamp(6)
  products   products  @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model products {
  id                 Int                 @id @default(autoincrement())
  name               String?             @db.VarChar(255)
  slug               String?             @unique @db.VarChar(255)
  description        String?
  image_path         String?             @db.VarChar(255)
  active             Boolean?            @default(true)
  created_at         DateTime?           @default(now()) @db.Timestamp(6)
  category           String?             @db.VarChar(100)
  category_id        Int?
  image_2            String?
  image_3            String?
  image_4            String?
  additional_info    String?
  product_reviews    product_reviews[]
  product_categories product_categories? @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_products_category")
}

model recipe_categories {
  id         Int       @id @default(autoincrement())
  name       String    @db.VarChar(150)
  slug       String    @unique @db.VarChar(150)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  is_active  Boolean?  @default(true)
  recipes    recipes[]
}

model recipes_post_tags {
  recipe_id Int
  tag_id    Int
  recipes   recipes @relation(fields: [recipe_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  tags      tags    @relation(fields: [tag_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([recipe_id, tag_id])
}


model recipe_comments {
  id         Int       @id @default(autoincrement())
  recipe_id  Int
  name       String?   @db.VarChar(100)
  email      String?   @db.VarChar(150)
  comment    String
  status     String?   @default("pending") @db.VarChar(20)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  recipes    recipes   @relation(fields: [recipe_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_recipe_comment")
}

model recipes {
  id                Int                @id @default(autoincrement())
  title             String             @db.VarChar(255)
  slug              String             @unique @db.VarChar(255)
  short_description String?            @db.VarChar(255)
  paragraph_1       String?
  paragraph_2       String?
  content           String?
  image             String?            @db.VarChar(255)
  status            String?            @default("draft") @db.VarChar(20)
  created_at        DateTime?          @default(now()) @db.Timestamp(6)
  updated_at        DateTime?          @default(now()) @db.Timestamp(6)
  category_id       Int?
  image_url         String?
  is_active         Boolean?           @default(true)
  recipe_comments   recipe_comments[]
  recipe_categories recipe_categories? @relation(fields: [category_id], references: [id], map: "fk_recipe_category")

  recipesPostTags recipes_post_tags[]
}

model site_contact_info {
  id            Int       @id @default(autoincrement())
  address_text  String?
  address_url   String?
  phone_numbers String[]
  emails        String[]
  map_url       String?
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  updated_at    DateTime? @default(now()) @db.Timestamp(6)
}

model site_contacts {
  id         Int       @id @default(autoincrement())
  phone      String    @db.VarChar(50)
  email      String    @db.VarChar(100)
  address    String
  created_at DateTime? @default(now()) @db.Timestamp(6)
  updated_at DateTime? @default(now()) @db.Timestamp(6)
}

model social_links {
  id         Int       @id @default(autoincrement())
  platform   String?   @db.VarChar(50)
  icon       String?   @db.VarChar(100)
  url        String?   @db.VarChar(255)
  active     Boolean?  @default(true)
  created_at DateTime? @default(now()) @db.Timestamp(6)
}

model tags {
  id        Int         @id @default(autoincrement())
  name      String      @db.VarChar(255)
  slug      String      @db.VarChar(255)
  blog_tags blog_tags[]

  recipesPostTags recipes_post_tags[]
}
